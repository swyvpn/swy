import{r as Oe,bl as Be,bm as B,a9 as _e,n as Ie,j as C,be as we,bn as Pe,b9 as We,i as me,F as $e,bo as qe,bp as Ue,an as Ge,bq as Ke,b0 as Se}from"./vendor.dee56adfed90.chunk.js";import{f as Ce,d as De,I as Ee}from"./index.23055111bb7c.js";var Ae={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var l=g(Oe),d=["placeholder","separator","isLastChild","ariaLabelOverride","shouldRender","inputStyle","focus","isDisabled","hasErrored","errorStyle","isSuccessed","successStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure","onSubmit"];function f(n){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(f=function(r){return r?o:a})(n)}function g(n,a){if(!a&&n&&n.__esModule)return n;if(n===null||A(n)!=="object"&&typeof n!="function")return{default:n};var o=f(a);if(o&&o.has(n))return o.get(n);var e={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in n)if(c!=="default"&&Object.prototype.hasOwnProperty.call(n,c)){var i=r?Object.getOwnPropertyDescriptor(n,c):null;i&&(i.get||i.set)?Object.defineProperty(e,c,i):e[c]=n[c]}return e.default=n,o&&o.set(n,e),e}function b(){return b=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(n[e]=o[e])}return n},b.apply(this,arguments)}function N(n,a){if(n==null)return{};var o=D(n,a),e,r;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(r=0;r<c.length;r++)e=c[r],!(a.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}function D(n,a){if(n==null)return{};var o={},e=Object.keys(n),r,c;for(c=0;c<e.length;c++)r=e[c],!(a.indexOf(r)>=0)&&(o[r]=n[r]);return o}function L(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function x(n,a){for(var o=0;o<a.length;o++){var e=a[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function W(n,a,o){return a&&x(n.prototype,a),o&&x(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function k(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&$(n,a)}function $(n,a){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},$(n,a)}function q(n){var a=z();return function(){var e=F(n),r;if(a){var c=F(this).constructor;r=Reflect.construct(e,arguments,c)}else r=e.apply(this,arguments);return Y(this,r)}}function Y(n,a){if(a&&(A(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(n)}function h(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function F(n){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},F(n)}function v(n,a,o){return a in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,n}function A(n){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},A(n)}var U=8,G=37,K=39,H=46,Q=32,Z=13,O=function(a){return A(a)==="object"},re=function(n){k(o,n);var a=q(o);function o(e){var r;return L(this,o),r=a.call(this,e),v(h(r),"getClasses",function(){for(var c=arguments.length,i=new Array(c),t=0;t<c;t++)i[t]=arguments[t];return i.filter(function(s){return!O(s)&&s!==!1}).join(" ")}),v(h(r),"getType",function(){var c=r.props,i=c.isInputSecure,t=c.isInputNum;return i?"password":t?"tel":"text"}),v(h(r),"getAriaLabel",function(c,i){var t=r.props.ariaLabelOverride;return t||"".concat(c===0?"Please enter verification code. ":"").concat(i?"Digit":"Character"," ").concat(c+1)}),r.input=l.default.createRef(),r}return W(o,[{key:"componentDidMount",value:function(){var r=this.props,c=r.focus,i=r.shouldAutoFocus,t=this.input.current;t&&c&&i&&t.focus()}},{key:"componentDidUpdate",value:function(r){var c=this.props.focus,i=this.input.current;r.focus!==c&&i&&c&&(i.focus(),i.select())}},{key:"render",value:function(){var r=this.props,c=r.placeholder,i=r.separator,t=r.isLastChild;r.ariaLabelOverride;var s=r.shouldRender,y=r.inputStyle,_=r.focus,P=r.isDisabled,I=r.hasErrored,m=r.errorStyle,w=r.isSuccessed,R=r.successStyle,T=r.focusStyle,E=r.disabledStyle;r.shouldAutoFocus;var ne=r.isInputNum,ae=r.index,ee=r.value,ue=r.className;r.isInputSecure,r.onSubmit;var oe=N(r,d);return l.default.createElement("div",{className:ue,style:{display:"flex",alignItems:"center"}},l.default.createElement("input",b({"aria-label":this.getAriaLabel(ae,ne),style:Object.assign({width:"1em",textAlign:"center",padding:0},O(y)&&y,_&&O(T)&&T,P&&O(E)&&E,I&&!w&&O(m)&&m,w&&!I&&O(R)&&R),placeholder:c,className:this.getClasses(y,_&&T,P&&E,I&&!w&&m,w&&!I&&R),type:this.getType(),ref:this.input,disabled:P,value:ee||""},oe)),!t&&s&&i)}}]),o}(l.PureComponent),p=function(n){k(o,n);var a=q(o);function o(){var e;L(this,o);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return e=a.call.apply(a,[this].concat(c)),v(h(e),"state",{activeInput:0}),v(h(e),"getOtpValue",function(){return e.props.value?e.props.value.toString().split(""):[]}),v(h(e),"getPlaceholderValue",function(){var t=e.props,s=t.placeholder,y=t.numInputs;if(typeof s=="string"){if(s.length===y)return s;s.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}}),v(h(e),"handleOtpChange",function(t){var s=e.props.onChange,y=t.join("");s(y)}),v(h(e),"isInputValueValid",function(t){var s=e.props.isInputNum?!isNaN(parseInt(t,10)):typeof t=="string";return s&&t.trim().length===1}),v(h(e),"focusInput",function(t){var s=e.props.numInputs,y=Math.max(Math.min(s-1,t),0);e.setState({activeInput:y})}),v(h(e),"focusNextInput",function(){var t=e.state.activeInput;e.focusInput(t+1)}),v(h(e),"focusPrevInput",function(){var t=e.state.activeInput;e.focusInput(t-1)}),v(h(e),"changeCodeAtFocus",function(t){var s=e.state.activeInput,y=e.getOtpValue();y[s]=t[0],e.handleOtpChange(y)}),v(h(e),"handleOnPaste",function(t){t.preventDefault();var s=e.state.activeInput,y=e.props,_=y.numInputs,P=y.isDisabled;if(!P){for(var I=e.getOtpValue(),m=s,w=t.clipboardData.getData("text/plain"),R=e.props.isInputNum?w.replace(/\D/g,""):w,T=R.slice(0,_-s).split(""),E=0;E<_;++E)E>=s&&T.length>0&&(I[E]=T.shift(),m++);e.setState({activeInput:m},function(){e.focusInput(m),e.handleOtpChange(I)})}}),v(h(e),"handleOnChange",function(t){var s=t.target.value;e.isInputValueValid(s)&&e.changeCodeAtFocus(s)}),v(h(e),"handleOnKeyDown",function(t){t.keyCode===U||t.key==="Backspace"?(t.preventDefault(),e.changeCodeAtFocus(""),e.focusInput(e.state.activeInput-1)):t.keyCode===H||t.key==="Delete"?(t.preventDefault(),e.changeCodeAtFocus("")):t.keyCode===G||t.key==="ArrowLeft"?(t.preventDefault(),e.focusPrevInput()):t.keyCode===K||t.key==="ArrowRight"?(t.preventDefault(),e.focusNextInput()):t.keyCode===Q||t.key===" "||t.key==="Spacebar"||t.key==="Space"?t.preventDefault():(t.keyCode===Z||t.key==="Enter")&&e.props.onSubmit()}),v(h(e),"handleOnInput",function(t){var s=t.target.value;if(t.target.value){if(t.target.value&&t.target.value.length>1){t.preventDefault();for(var y=e.props.numInputs,_=e.state.activeInput,P=e.getOtpValue(),I=t.target.value.slice(0,y-_).split(""),m=0;m<y;++m)m>=_&&I.length>0&&(P[m]=I.shift());e.handleOtpChange(P),e.focusInput(e.props.numInputs)}else if(s&&s.trim().length>1)t.clipboardData={getData:function(){return s.trim()}},e.handleOnPaste(t);else if(e.isInputValueValid(t.target.value))e.focusNextInput();else if(!e.props.isInputNum){var w=t.nativeEvent;w.data===null&&w.inputType==="deleteContentBackward"&&(t.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}}}),v(h(e),"renderInputs",function(){for(var t=e.state.activeInput,s=e.props,y=s.id,_=s.autoComplete,P=s.numInputs,I=s.inputStyle,m=s.focusStyle,w=s.separator,R=s.separateAfter,T=R===void 0?1:R,E=s.isDisabled,ne=s.disabledStyle,ae=s.hasErrored,ee=s.errorStyle,ue=s.isSuccessed,oe=s.successStyle,xe=s.shouldAutoFocus,Te=s.isInputNum,je=s.isInputSecure,Le=s.className,J=s.inputProps,ke=s.onSubmit,pe=[],fe=e.getOtpValue(),de=e.getPlaceholderValue(),ve=e.props["data-cy"],he=e.props["data-testid"],ye=e.props["custom-test-attr"],ge=e.props["custom-test-id"],Fe=function(S){var se=void 0;(S+1)%parseInt(T)===0?se=!0:se=!1;var be={};ye&&(be[ye]=ge&&"".concat(ge,"-").concat(S));var le={};J&&(Array.isArray(J)?J[S]&&(le=J[S]):le=J),pe.push(l.default.createElement(re,b({id:y&&"".concat(y,"-").concat(S),autoComplete:_!=null?_:"off",placeholder:de&&de[S],key:S,index:S,focus:t===S,value:fe&&fe[S],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(Ve){e.setState({activeInput:S}),Ve.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:w,inputStyle:I,focusStyle:m,isLastChild:S===P-1,isDisabled:E,disabledStyle:ne,hasErrored:ae,errorStyle:ee,isSuccessed:ue,successStyle:oe,shouldAutoFocus:xe,isInputNum:Te,isInputSecure:je,className:Le,"data-cy":ve&&"".concat(ve,"-").concat(S),"data-testid":he&&"".concat(he,"-").concat(S),shouldRender:se,onSubmit:ke},le,be)))},ie=0;ie<P;ie++)Fe(ie);return pe}),e}return W(o,[{key:"componentDidUpdate",value:function(){var r=this.props.value,c=this.state.activeInput;r==""&&c>0&&this.setState({activeInput:0})}},{key:"render",value:function(){var r=this.props.containerStyle;return l.default.createElement("div",{style:Object.assign({display:"flex"},O(r)&&r),className:O(r)?"":r},this.renderInputs())}}]),o}(l.Component);v(p,"defaultProps",{numInputs:4,onChange:function(a){return console.log(a)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1,onSubmit:function(a){return console.log(a)}});var V=p;u.default=V})(Ae);const it=Be(Ae);var te={},He=B&&B.__createBinding||(Object.create?function(u,l,d,f){f===void 0&&(f=d);var g=Object.getOwnPropertyDescriptor(l,d);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,f,g)}:function(u,l,d,f){f===void 0&&(f=d),u[f]=l[d]}),Qe=B&&B.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),Ze=B&&B.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&He(l,u,d);return Qe(l,u),l};Object.defineProperty(te,"__esModule",{value:!0});te.useTurnstile=void 0;const M=Ze(Oe),X=typeof globalThis<"u"?globalThis:window;let j=typeof X.turnstile<"u"?"ready":"unloaded",Re,ce;const Ne=new Promise((u,l)=>{ce={resolve:u,reject:l},j==="ready"&&u(void 0)});{const u="cf__reactTurnstileOnLoad",l="https://challenges.cloudflare.com/turnstile/v0/api.js";Re=()=>{if(j==="unloaded"){j="loading",X[u]=()=>{ce.resolve(),j="ready",delete X[u]};const d="".concat(l,"?onload=").concat(u,"&render=explicit"),f=document.createElement("script");f.src=d,f.async=!0,f.addEventListener("error",()=>{ce.reject("Failed to load Turnstile."),delete X[u]}),document.head.appendChild(f)}return Ne}}function Je({id:u,className:l,style:d,sitekey:f,action:g,cData:b,theme:N,language:D,tabIndex:L,responseField:x,responseFieldName:W,size:k,fixedSize:$,retry:q,retryInterval:Y,refreshExpired:h,appearance:z,execution:F,userRef:v,onVerify:A,onLoad:U,onError:G,onExpire:K,onTimeout:H,onAfterInteractive:Q,onBeforeInteractive:Z,onUnsupported:O}){const re=(0,M.useRef)(null),p=(0,M.useState)({onVerify:A,onLoad:U,onError:G,onExpire:K,onTimeout:H,onAfterInteractive:Q,onBeforeInteractive:Z,onUnsupported:O})[0],V=v!=null?v:re;return(0,M.useEffect)(()=>{if(!V.current)return;let n=!1,a="";return(async()=>{var o,e;if(j!=="ready")try{await Re()}catch(i){(o=p.onError)===null||o===void 0||o.call(p,i);return}if(n||!V.current)return;let r;const c={sitekey:f,action:g,cData:b,theme:N,language:D,tabindex:L,"response-field":x,"response-field-name":W,size:k,retry:q,"retry-interval":Y,"refresh-expired":h,appearance:z,execution:F,callback:i=>{var t;return(t=p.onVerify)===null||t===void 0?void 0:t.call(p,i,r)},"error-callback":i=>{var t;return(t=p.onError)===null||t===void 0?void 0:t.call(p,i,r)},"expired-callback":i=>{var t;return(t=p.onExpire)===null||t===void 0?void 0:t.call(p,i,r)},"timeout-callback":()=>{var i;return(i=p.onTimeout)===null||i===void 0?void 0:i.call(p,r)},"after-interactive-callback":()=>{var i;return(i=p.onAfterInteractive)===null||i===void 0?void 0:i.call(p,r)},"before-interactive-callback":()=>{var i;return(i=p.onBeforeInteractive)===null||i===void 0?void 0:i.call(p,r)},"unsupported-callback":()=>{var i;return(i=p.onUnsupported)===null||i===void 0?void 0:i.call(p,r)}};a=window.turnstile.render(V.current,c),r=Ye(a),(e=p.onLoad)===null||e===void 0||e.call(p,a,r)})(),()=>{n=!0,a&&window.turnstile.remove(a)}},[f,g,b,N,D,L,x,W,k,q,Y,h,z,F]),(0,M.useEffect)(()=>{p.onVerify=A,p.onLoad=U,p.onError=G,p.onExpire=K,p.onTimeout=H,p.onAfterInteractive=Q,p.onBeforeInteractive=Z,p.onUnsupported=O},[A,U,G,K,H,Q,Z,O]),M.default.createElement("div",{ref:V,id:u,className:l,style:$?{...d!=null?d:{},width:k==="compact"?"130px":"300px",height:k==="compact"?"120px":"65px"}:d})}var Xe=te.default=Je;function Ye(u){return{execute:l=>window.turnstile.execute(u,l),reset:()=>window.turnstile.reset(u),getResponse:()=>window.turnstile.getResponse(u),isExpired:()=>window.turnstile.isExpired(u)}}function ze(){const[u,l]=(0,M.useState)(j);return(0,M.useEffect)(()=>{j!=="ready"&&Ne.then(()=>l(j))},[]),X.turnstile}te.useTurnstile=ze;const et=({email:u})=>{const{data:l}=De(),[d,{isLoading:f}]=Ce(),{enqueueSnackbar:g}=_e(),{t:b}=Ie(),[N,D]=We.useState(!1);return me($e,{children:[C(we,{position:"end",children:C(Ee,{"aria-label":"send email code",onClick:()=>D(!0),edge:"end",color:"secondary",disabled:f,children:C(Pe,{})})}),me(qe,{open:N,onClose:()=>D(!1),children:[C(Ue,{children:C(Ge,{i18nKey:"auth.captcha.title",children:"Captcha"})}),C(Ke,{children:C(Xe,{sitekey:l==null?void 0:l.recaptcha_site_key,onVerify:L=>{d({email:u,recaptcha_data:L}).unwrap().then(()=>{g(b("auth.captcha.success"),{variant:"success"}),Se.event("send_email_verify",{category:"auth",label:"send_email_verify",email:u,success:!0})}).catch(x=>{console.error(x),g(b("auth.captcha.error"),{variant:"error"}),Se.event("send_email_verify",{category:"auth",label:"send_email_verify",email:u,success:!1,error:x})}).finally(()=>{D(!1)})},onError:()=>{g(b("auth.captcha.error"),{variant:"error"})}})})]})]})},st=({email:u})=>{const[l,{isLoading:d}]=Ce(),{data:f}=De(),{enqueueSnackbar:g}=_e(),{t:b}=Ie(),N=()=>{console.log("send email code"),l({email:u}).unwrap().then(()=>{g(b("auth.captcha.success"),{variant:"success"})}).catch(D=>{console.error(D),g(b("auth.captcha.error"),{variant:"error"})})};return(f==null?void 0:f.is_recaptcha)===1?C(et,{email:u}):C(we,{position:"end",children:C(Ee,{"aria-label":"send email code",onClick:N,edge:"end",color:"secondary",disabled:d,children:C(Pe,{})})})},tt=u=>new RegExp(/[0-9]/).test(u),rt=u=>new RegExp(/[a-z]/).test(u)&&new RegExp(/[A-Z]/).test(u),nt=u=>new RegExp(/[!#@$%^&*)(+=._-]/).test(u),lt=u=>u<2?{label:"Poor",color:"error.main"}:u<3?{label:"Weak",color:"warning.main"}:u<4?{label:"Normal",color:"warning.dark"}:u<5?{label:"Good",color:"success.main"}:u<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"},ct=u=>{let l=0;return u.length>5&&(l+=1),u.length>7&&(l+=1),tt(u)&&(l+=1),nt(u)&&(l+=1),rt(u)&&(l+=1),l};export{it as O,st as S,lt as a,ct as s};
