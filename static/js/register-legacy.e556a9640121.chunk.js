System.register(["./vendor-legacy.39ec95964c16.chunk.js","./AuthWrapper-legacy.9c84bdbe9c00.chunk.js","./formik.esm-legacy.5cf3b4ed14ae.chunk.js","./password-strength-legacy.2dd83708b113.chunk.js","./index-legacy.163a29dc5392.js","./AnimateButton-legacy.f0d8873209e4.chunk.js","./useQuery-legacy.aa7194711278.chunk.js","./hey-listen.es-legacy.2cf185e905fe.chunk.js"],(function(e,r){"use strict";var i,t,n,s,o,a,l,d,c,m,u,p,h,g,_,v,w,b,f,y,x,S,q,C,j,k,B,F,W,A,E,I,P,z,D,M,O,R,V,$,G,H,J,K,Q;return{setters:[e=>{i=e.h,t=e.ba,n=e.aa,s=e.n,o=e.a9,a=e.r,l=e.j,d=e.F,c=e.b0,m=e.l,u=e.B,p=e.i,h=e.aJ,g=e.ah,_=e.bb,v=e.an,w=e.bc,b=e.bd,f=e.be,y=e.bf,x=e.bg,S=e.bi,q=e.T,C=e.bj,j=e.bk,k=e.aG,B=e.m,F=e.bh,W=e.ao},e=>{A=e.A},e=>{E=e.c,I=e.a,P=e.b,z=e.d,D=e.F},e=>{M=e.S,O=e.O,R=e.s,V=e.a},e=>{$=e.c,G=e.d,H=e.I,J=e.b},e=>{K=e.A},e=>{Q=e.u},null],execute:function(){const r=()=>{const e=i(),r=t(),A=n(),{t:J}=s("common"),{enqueueSnackbar:T}=o(),L=Q(),[N]=$(),{data:U}=G(),[X,Y]=a.useState(),[Z,ee]=a.useState(!1),re=()=>{ee(!Z)},ie=e=>{e.preventDefault()},te=e=>{const r=R(e);Y(V(r))};a.useEffect((()=>{te("")}),[]);const ne=a.useMemo((()=>E().shape({email:I().email(J("register.email_invalid").toString()).max(255,J("register.email_max",{count:255}).toString()).required(J("register.email_required").toString()),password:I().min(8,J("register.password_min",{count:8}).toString()).max(255,J("register.password_max",{count:255}).toString()).required(J("register.password_required").toString()),password_confirm:I().oneOf([P("password"),null],J("register.password_confirm_invalid").toString()).required(J("register.password_confirm_required").toString()),invite_code:U?.is_invite_force?I().required(J("register.invite_code_required").toString()):I().max(8,J("register.invite_code_max").toString()),email_code:U?.is_email_verify?z().required(J("register.email_code_required").toString()):z().negative()})),[J,U?.is_invite_force,U?.is_email_verify]);return l(d,{children:l(D,{initialValues:{email:"",password:"",password_confirm:"",invite_code:L.get("code")??"",email_code:"",agree:!1,submit:null},validationSchema:ne,onSubmit:async(e,{setErrors:i,setStatus:t,setSubmitting:n})=>{if(!e.agree)return t({success:!1}),i({submit:J("register.agree_required").toString()}),void n(!1);try{await N({email:e.email,password:e.password,invite_code:e.invite_code,email_code:U?.is_email_verify?e.email_code:""}).unwrap().then((()=>{t({success:!0}),T(J("notice::register_success"),{variant:"success"}),A("/dashboard",{replace:!0}),c.event("register",{category:"auth",label:"register",method:"email",success:!0,email:e.email,password_strength:X?.label,invite_code:e.invite_code})}),(r=>{t({success:!1}),i(m.isEmpty(r.errors)?{submit:r.message}:r.errors),T(r.message,{variant:"error"}),c.event("register",{category:"auth",label:"register",method:"email",success:!1,error:r.message,email:e.email,values:e})}))}catch(s){console.error(s),r.current&&(t({success:!1}),i(m.isEmpty(s.errors)?{submit:s.message}:s.errors),T(J("notice::register_failed"),{variant:"error"}))}finally{n(!1)}},children:({errors:r,handleBlur:i,handleChange:t,handleSubmit:n,isSubmitting:s,touched:o,values:a,setValues:c})=>l(u,{component:"form",onSubmit:n,children:p(h,{container:!0,spacing:3,children:[l(h,{item:!0,xs:12,children:p(g,{spacing:1,children:[l(_,{htmlFor:"email",children:l(v,{children:"register.email"})}),l(w,{fullWidth:!0,error:Boolean(o.email&&r.email),id:"email",type:"email",value:a.email,name:"email",onBlur:i,onChange:t,placeholder:"user@example.com",inputProps:{},endAdornment:1===U?.is_email_verify?l(M,{email:a.email}):void 0}),o.email&&r.email&&l(b,{error:!0,id:"helper-text-email-signup",children:r.email})]})}),1===U?.is_email_verify&&l(d,{children:l(h,{item:!0,xs:12,children:p(g,{spacing:1,children:[l(_,{htmlFor:"email-code-signup",children:l(v,{children:"register.email_code"})}),l(O,{value:a.email_code,onChange:e=>{c((r=>({...r,email_code:e})))},numInputs:6,containerStyle:{justifyContent:"space-between"},inputStyle:{width:"100%",margin:"8px",padding:"10px",border:`1px solid ${"dark"===e.palette.mode?e.palette.grey[200]:e.palette.grey[300]}`,borderRadius:4,":hover":{borderColor:e.palette.primary.main}},focusStyle:{outline:"none",boxShadow:e.customShadows.primary,border:`1px solid ${e.palette.primary.main}`}}),o.email_code&&r.email_code&&l(b,{error:!0,id:"helper-text-email-signup",children:r.email_code})]})})}),p(h,{item:!0,xs:12,children:[p(g,{spacing:1,children:[l(_,{htmlFor:"password-signup",children:l(v,{children:"register.password"})}),l(w,{fullWidth:!0,error:Boolean(o.password&&r.password),id:"password-signup",type:Z?"text":"password",value:a.password,name:"password",onBlur:i,onChange:e=>{t(e),te(e.target.value)},autoComplete:"new-password",endAdornment:l(f,{position:"end",children:l(H,{"aria-label":"toggle password visibility",onClick:re,onMouseDown:ie,edge:"end",color:"secondary",children:l(Z?y:x,{})})}),placeholder:"******",inputProps:{}}),o.password&&r.password&&l(b,{error:!0,id:"helper-text-password-signup",children:r.password})]}),l(S,{fullWidth:!0,sx:{mt:2},children:p(h,{container:!0,spacing:2,alignItems:"center",children:[l(h,{item:!0,children:l(u,{sx:{bgcolor:X?.color,width:85,height:8,borderRadius:"7px"}})}),l(h,{item:!0,children:l(q,{variant:"subtitle1",fontSize:"0.75rem",children:J("register.password_strength",{context:m.lowerCase(X?.label)}).toString()})})]})})]}),l(h,{item:!0,xs:12,children:p(g,{spacing:1,children:[l(_,{htmlFor:"password-confirm",children:l(v,{children:"register.password_confirm"})}),l(w,{fullWidth:!0,error:Boolean(o.password_confirm&&r.password_confirm),id:"password-confirm",type:Z?"text":"password",value:a.password_confirm,name:"password_confirm",onBlur:i,onChange:e=>{t(e),te(e.target.value)},autoComplete:"new-password",placeholder:"******",inputProps:{}}),o.password_confirm&&r.password_confirm&&l(b,{error:!0,id:"helper-text-password-confirm",children:r.password_confirm})]})}),l(h,{item:!0,xs:12,children:p(g,{spacing:1,children:[l(_,{htmlFor:"invite-code-signup",required:1===U?.is_invite_force,children:l(v,{children:"register.invite_code"})}),l(w,{fullWidth:!0,error:Boolean(o.invite_code&&r.invite_code),id:"invite-code-signup",type:"text",value:a.invite_code,name:"invite_code",onBlur:i,onChange:t,required:1===U?.is_invite_force,placeholder:J("register.invite_code_placeholder",{context:1===U?.is_invite_force?"required":"optional"}).toString(),inputProps:{},disabled:null!==L.get("code")}),o.invite_code&&r.invite_code&&l(b,{error:!0,id:"helper-text-email-signup",children:r.invite_code})]})}),l(h,{item:!0,xs:12,children:l(C,{value:!1,control:l(j,{}),name:"agree",id:"agree",onBlur:i,onChange:t,"aria-required":!0,sx:{alignItems:"flex-start"},label:l(q,{variant:"body2",sx:{lineHeight:2.9},children:p(v,{i18nKey:"register.license_agree",children:[l(k,{id:"terms-of-service",variant:"subtitle2",component:B,to:"https://swyvpn.com/"}),l(k,{id:"privacy-policy",variant:"subtitle2",component:B,to:"https://swyvpn.com/"})]})})})}),l(h,{item:!0,xs:12,children:l(K,{children:l(F,{disableElevation:!0,disabled:s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:s?l(W,{size:24,color:"inherit"}):l(v,{children:"register.submit"})})})})]})})})})};e("default",(()=>(J("register"),l(A,{children:p(h,{container:!0,spacing:3,children:[l(h,{item:!0,xs:12,children:p(g,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[l(q,{variant:"h3",children:l(v,{children:"register.title"})}),l(q,{component:B,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:l(v,{children:"register.go-login"})})]})}),l(h,{item:!0,xs:12,children:l(r,{})})]})}))))}}}));
