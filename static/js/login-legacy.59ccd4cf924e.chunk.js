System.register(["./vendor-legacy.39ec95964c16.chunk.js","./AuthWrapper-legacy.9c84bdbe9c00.chunk.js","./formik.esm-legacy.5cf3b4ed14ae.chunk.js","./index-legacy.163a29dc5392.js","./AnimateButton-legacy.f0d8873209e4.chunk.js","./hey-listen.es-legacy.2cf185e905fe.chunk.js"],(function(e,i){"use strict";var r,n,a,l,t,o,s,c,d,h,m,g,u,p,b,w,y,x,f,v,S,k,j,B,C,_,q,A,D,E,F,I,W;return{setters:[e=>{r=e.b9,n=e.ba,a=e.n,l=e.aa,t=e.j,o=e.F,s=e.b0,c=e.l,d=e.B,h=e.i,m=e.aJ,g=e.ah,u=e.bb,p=e.an,b=e.bc,w=e.bd,y=e.be,x=e.bf,f=e.bg,v=e.T,S=e.aG,k=e.m,j=e.bh,B=e.ao},e=>{C=e.A},e=>{_=e.F,q=e.c,A=e.a},e=>{D=e.u,E=e.a,F=e.I,I=e.b},e=>{W=e.A},null],execute:function(){const i=()=>{const[e,i]=r.useState(!1),{isLoggedIn:C}=D((e=>e.auth)),[I]=E(),z=n(),{t:K}=a("common",{keyPrefix:"login"}),[L,M]=r.useState(!1),V=()=>{M(!L)},G=e=>{e.preventDefault()},J=e=>{e.getModifierState("CapsLock")?i(!0):i(!1)},P=l();return t(o,{children:t(_,{initialValues:{email:"",password:"",submit:null},validationSchema:q().shape({email:A().email(K("email_invalid").toString()).max(255).required(K("email_required").toString()),password:A().max(255).required(K("password_required").toString())}),onSubmit:async(e,{setErrors:i,setStatus:r,setSubmitting:n})=>{try{n(!0),await I(e).unwrap().then((()=>{r({success:!0}),s.event("login",{category:"auth",label:"login",method:"email",success:!0,email:e.email}),P("/dashboard",{replace:!0})})).catch((n=>{r({success:!1}),i(c.isEmpty(n.errors)?{submit:n.message}:n.errors),s.event("login",{category:"auth",label:"login",method:"email",success:!1,error:n.message,email:e.email,values:e})})).finally((()=>{n(!1)}))}catch(a){console.error(a),z.current&&(r({success:!1}),i(c.isEmpty(a.errors)?{submit:a.message}:a.errors),n(!1))}},children:({errors:r,handleBlur:n,handleChange:a,handleSubmit:l,isSubmitting:o,touched:s,values:c})=>t(d,{component:"form",noValidate:!0,onSubmit:l,children:h(m,{container:!0,spacing:3,children:[t(m,{item:!0,xs:12,children:h(g,{spacing:1,children:[t(u,{htmlFor:"email-login",children:t(p,{children:"login.email"})}),t(b,{id:"email-login",type:"email",value:c.email,name:"email",onBlur:n,onChange:a,placeholder:K("email_placeholder").toString(),fullWidth:!0,error:Boolean(s.email&&r.email)}),s.email&&r.email&&t(w,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]})}),t(m,{item:!0,xs:12,children:h(g,{spacing:1,children:[t(u,{htmlFor:"password-login",children:t(p,{children:"login.password"})}),t(b,{fullWidth:!0,color:e?"warning":"primary",error:Boolean(s.password&&r.password),id:"-password-login",type:L?"text":"password",value:c.password,name:"password",onBlur:e=>{i(!1),n(e)},onKeyDown:J,onChange:a,endAdornment:t(y,{position:"end",children:t(F,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:G,edge:"end",color:"secondary",children:t(L?x:f,{})})}),placeholder:K("password_placeholder").toString()}),e&&t(v,{variant:"caption",sx:{color:"warning.main"},id:"warning-helper-text-password-login",children:t(p,{ns:"notice",children:"capslock_on"})}),s.password&&r.password&&t(w,{error:!0,id:"standard-weight-helper-text-password-login",children:r.password})]})}),t(m,{item:!0,xs:12,sx:{mt:-1},children:h(g,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[t(d,{}),t(S,{variant:"h6",component:k,to:C?"/auth/forgot-password":"/forgot-password",color:"text.primary",children:K("forgot_password").toString()})]})}),r.submit&&t(m,{item:!0,xs:12,children:t(w,{error:!0,children:r.submit})}),t(m,{item:!0,xs:12,children:t(W,{children:t(j,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:o?t(B,{size:24}):t(p,{i18nKey:"login.submit",children:"Submit"})})})})]})})})})};e("default",(()=>(I("login"),t(C,{children:h(m,{container:!0,spacing:3,children:[t(m,{item:!0,xs:12,children:h(g,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[t(v,{variant:"h3",children:t(p,{children:"login.title"})}),t(v,{component:k,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:t(p,{children:"login.go-register"})})]})}),t(m,{item:!0,xs:12,children:t(i,{})})]})}))))}}}));
